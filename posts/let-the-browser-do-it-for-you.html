<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement;var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.setAttribute('data-theme', 'dark'):d.setAttribute('data-theme', 'light')}else if(e) d.setAttribute('data-theme', e)}catch(e){}}()</script><title>Let the Browser Do It for You â€“ Etienne Martin</title><meta name="description" content="A reminder to myself that I don&#x27;t always need to reinvent the wheel."/><link rel="canonical" href="https://etiennemartin.ca/posts/let-the-browser-do-it-for-you"/><meta http-equiv="Content-Language" content="en"/><meta name="apple-mobile-web-app-title" content="Etienne Martin"/><meta name="application-name" content="Etienne Martin"/><meta property="og:site_name" content="Etienne Martin"/><meta property="og:url" content="https://etiennemartin.ca/posts/let-the-browser-do-it-for-you"/><meta property="og:type" content="article"/><meta property="og:image" content="https://etiennemartin.ca/images/eaf449a74fbfb57d50e8a7cf952a9888-1600.jpg"/><meta property="og:image:alt" content="A little browser lifting weights"/><meta property="og:title" content="Let the Browser Do It for You"/><meta property="og:description" content="A reminder to myself that I don&#x27;t always need to reinvent the wheel."/><meta property="article:author" content="Etienne Martin"/><meta property="article:published_time" content="2022-02-18T19:26:54.937Z"/><meta name="twitter:title" content="Let the Browser Do It for You"/><meta name="twitter:description" content="A reminder to myself that I don&#x27;t always need to reinvent the wheel."/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="https://etiennemartin.ca/images/eaf449a74fbfb57d50e8a7cf952a9888-1600.jpg"/><meta name="twitter:image:alt" content="A little browser lifting weights"/><meta name="next-head-count" content="23"/><link rel="preload" href="/fonts/Inter/Inter.var.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="stylesheet" href="/fonts/Inter/Inter.css"/><link rel="stylesheet" href="/fonts/JetBrainsMono/JetBrainsMono.css"/><link rel="icon" href="/favicon.ico" sizes="any"/><link rel="icon" href="/icon-192.png" type="image/png"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="manifest" href="/manifest.webmanifest"/><link rel="preload" href="/_next/static/css/ecc468834733a5a3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ecc468834733a5a3.css" data-n-g=""/><link rel="preload" href="/_next/static/css/d9c01233099392a5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d9c01233099392a5.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-a5ffa1c6f1cef6a7.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-a0853fbc3d9f629b.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ee89414a5d6afb8c.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5B...path%5D-9f5170b79d91f0f7.js" defer=""></script><script src="/_next/static/d_zpUAM6bMdIsyFQj3ifP/_buildManifest.js" defer=""></script><script src="/_next/static/d_zpUAM6bMdIsyFQj3ifP/_ssgManifest.js" defer=""></script><script src="/_next/static/d_zpUAM6bMdIsyFQj3ifP/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="l3ddla7"><header class="hwdrux3"><div><a aria-label="Go back home" class="h1dwua8q" href="/"><img alt="A tiny photo of me" class="i1gwbqyj ps9hih1" src="/images/41853c4c02d521ba0e394a80370274a5-400.jpg" srcSet="/images/41853c4c02d521ba0e394a80370274a5-400.jpg 400w,/images/6080c552ef4a0d44addc8e0a2ab498a9-300.jpg 300w,/images/c9a15ebfaa93d52cc767465263d2fb59-200.jpg 200w,/images/5cdea93359126c8ae5a80d8ed23f95e3-100.jpg 100w" width="400" height="400" sizes="60px"/><p><strong>Etienne Martin</strong><em>A chronological list of thoughts on web development</em></p></a></div><div></div></header><main class="muaftu5"><article class="c17rriik"><header><h1 class="tkecwvo h146oxlm">Let the Browser Do It for You</h1><p class="sjgrdq9">February 18, 2022<!-- --> â€¢ <!-- -->9 min read</p></header><img alt="A little browser lifting weights" class="i1gwbqyj" src="/images/eaf449a74fbfb57d50e8a7cf952a9888-1600.jpg" srcSet="/images/eaf449a74fbfb57d50e8a7cf952a9888-1600.jpg 1600w,/images/32640e813e2833a3997eb647a030c28b-1500.jpg 1500w,/images/ed9d38490775b83aaeb5658f5182ea53-1400.jpg 1400w,/images/b589adb1ce6fb35d567f947ed9d07f7b-1300.jpg 1300w,/images/a040f5fa349b09a609a926d52a95d3e0-1200.jpg 1200w,/images/b8c280690c932db74dc12743a4350f01-1100.jpg 1100w,/images/b95941deef73dbc9ac84bd650830a035-1000.jpg 1000w,/images/0718cf89cd0737f9823d6bd06fd5b9dc-900.jpg 900w,/images/646e5112d54285187f04285243dbeb98-800.jpg 800w,/images/1409bbab4486f8cba89554b9b33eeb92-700.jpg 700w,/images/663a91a664a2e95746bd38e99c089dec-600.jpg 600w,/images/b089419796c4a93274a2bff79d1e215f-500.jpg 500w,/images/20f0e099bae5f99aff34b97f4c9e812b-400.jpg 400w,/images/0f6c34e2b9e8563b2fb90ec7522be863-300.jpg 300w,/images/e3b7338bac0fe3fe96734db2475c7d89-200.jpg 200w,/images/350feb66fc63be5220835f5c90b4757b-100.jpg 100w" width="1600" height="1118" sizes="(max-width: 768px) 100vw, 768px"/><p class="p2azb0q">Browsers are an incredible feat of engineering. According to wikipedia, the Chromium codebase contains about <a target="_blank" class="lmm5nmn" href="https://en.wikipedia.org/wiki/Chromium_(web_browser)#:~:text=35%20million%20source%20lines%20of%20code.">35 million lines of source code</a>.
It&#x27;s really impressive to me that they work at all.</p><p class="p2azb0q">Using built-in browser features is not a novel idea. Choosing <code class="wwej1dx">border-radius</code> over background sprites may seem obvious nowadays but it was not always the case. There are many things we take for granted that were just hopes and dreams not so long ago.</p><p class="p2azb0q">I&#x27;ve realised that once I have found a way of doing something, I tend to stick with it and accept it as the status quo. I often find myself reusing techniques from my old bag of tricks without checking to see if anything changed in the browser landscape.</p><p class="p2azb0q">This post is mostly a reminder to myself that I don&#x27;t always need to reinvent the wheel and that I can, in most cases, rely on the browser to do the heavy lifting for me.</p><hr class="d1ueoqn6"/><p class="p2azb0q"><em>I need to mention that it&#x27;s not always possible to use some of the tricks highlighted in this article if you are building an <a target="_blank" class="lmm5nmn" href="https://en.wikipedia.org/wiki/Isomorphic_JavaScript">isomorphic application</a>.</em> Some techniques rely on browser features that are not available in the Node.js runtime. But hey, things move fast, I&#x27;m looking at you <a target="_blank" class="lmm5nmn" href="https://github.com/nodejs/node/pull/41749">#41749</a>.</p><hr class="d1ueoqn6"/><h2 class="hu9il03">URLs</h2><p class="p2azb0q">Let&#x27;s start with the basics. Dealing with URLs is pretty common when developing web applications. It&#x27;s also quite hard to get right, better let the browser do the magic.</p><h3 class="h1kb6pbt">Parsing URLs</h3><p class="p2azb0q">I think we&#x27;ve all been there before. We need to extract data from a URL, so we put together a little function:</p><pre><div class="w13c3r7c"><button aria-label="Copy text to clipboard" class="budyhtb c1up212z"><span aria-hidden="true" class="c180lrjy">Copied âœ¨</span><span class="t1ypji8z"><svg aria-hidden="true" width="752pt" height="752pt" version="1.1" viewBox="0 0 752 752" xmlns="http://www.w3.org/2000/svg"><path d="m486.91 229.86h-147.38c-9.6719 0-18.945 3.8398-25.785 10.68s-10.68 16.113-10.68 25.785v35.52h-37.887c-9.6562-0.027344-18.926 3.7773-25.781 10.578-6.8516 6.8008-10.73 16.043-10.781 25.695v147.57c0.027344 9.6641 3.875 18.922 10.711 25.758 6.832 6.832 16.094 10.684 25.758 10.707h147.38c9.668 0 18.945-3.8438 25.785-10.68 6.8359-6.8398 10.68-16.113 10.68-25.785v-35.52h37.887c9.6523 0.023438 18.926-3.7812 25.777-10.578 6.8555-6.8008 10.73-16.043 10.781-25.699v-147.57c-0.023437-9.6641-3.875-18.926-10.707-25.758s-16.094-10.684-25.758-10.707zm-67.152 255.73c0 4.0273-3.2656 7.293-7.293 7.293h-147.38c-4.0078-0.050781-7.2422-3.2891-7.293-7.293v-147.48c0-4.0273 3.2656-7.293 7.293-7.293h147.38c1.9414-0.023437 3.8086 0.73438 5.1836 2.1094s2.1328 3.2422 2.1094 5.1836v147.57zm74.445-71.703c0 4.0273-3.2656 7.293-7.293 7.293h-37.887v-83.066c0-9.668-3.8398-18.945-10.68-25.785-6.8398-6.8359-16.113-10.68-25.785-10.68h-80.32v-35.328c0-4.0273 3.2656-7.293 7.293-7.293h147.38c4.0078 0.050781 7.2422 3.2852 7.293 7.293z"></path></svg></span></button><div class="s1fux44s"><code class="ch91s9f prism-code language-javascript" style="color:#F8F8F2;background-color:#282A36"><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// ðŸš« Don&#x27;t do this (keep reading)</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">getQueryString</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">slice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">indexOf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;?&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">getQueryString</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://example.com/?test=1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></div><div class="w1fan3zt"><div class="slkqgdl"><div class="h1ar9408"><h3 class="lsty687 h1va7th9">Console:</h3></div><div class="c4lgw7o"></div><div class="fc6lgc4"></div></div></div></div></pre><p class="p2azb0q">We start testing our code and realize we forgot to handle the case where the query string is missing completely.</p><p class="p2azb0q">Undeterred, we go back to our function and add a bit of code to handle that case. We do a little more testing and we&#x27;re confident we nailed it this time.
But a couple of days later our feature starts to break in production because someone somewhere decided to put <a target="_blank" class="lmm5nmn" href="https://en.wikipedia.org/wiki/URI_fragment">a fragment</a> at the end of their url.</p><p class="p2azb0q"><strong>Parsing URLs is hard</strong>, and doing it by hand is rarely a good idea.</p><p class="p2azb0q">Luckily for us, browsers ship with the <a target="_blank" class="lmm5nmn" href="https://developer.mozilla.org/en-US/docs/Web/API/URL"><code class="wwej1dx">URL</code></a> API which allows us to reliably parse any URL with a single line of code:</p><pre><div class="w13c3r7c"><button aria-label="Copy text to clipboard" class="budyhtb c1up212z"><span aria-hidden="true" class="c180lrjy">Copied âœ¨</span><span class="t1ypji8z"><svg aria-hidden="true" width="752pt" height="752pt" version="1.1" viewBox="0 0 752 752" xmlns="http://www.w3.org/2000/svg"><path d="m486.91 229.86h-147.38c-9.6719 0-18.945 3.8398-25.785 10.68s-10.68 16.113-10.68 25.785v35.52h-37.887c-9.6562-0.027344-18.926 3.7773-25.781 10.578-6.8516 6.8008-10.73 16.043-10.781 25.695v147.57c0.027344 9.6641 3.875 18.922 10.711 25.758 6.832 6.832 16.094 10.684 25.758 10.707h147.38c9.668 0 18.945-3.8438 25.785-10.68 6.8359-6.8398 10.68-16.113 10.68-25.785v-35.52h37.887c9.6523 0.023438 18.926-3.7812 25.777-10.578 6.8555-6.8008 10.73-16.043 10.781-25.699v-147.57c-0.023437-9.6641-3.875-18.926-10.707-25.758s-16.094-10.684-25.758-10.707zm-67.152 255.73c0 4.0273-3.2656 7.293-7.293 7.293h-147.38c-4.0078-0.050781-7.2422-3.2891-7.293-7.293v-147.48c0-4.0273 3.2656-7.293 7.293-7.293h147.38c1.9414-0.023437 3.8086 0.73438 5.1836 2.1094s2.1328 3.2422 2.1094 5.1836v147.57zm74.445-71.703c0 4.0273-3.2656 7.293-7.293 7.293h-37.887v-83.066c0-9.668-3.8398-18.945-10.68-25.785-6.8398-6.8359-16.113-10.68-25.785-10.68h-80.32v-35.328c0-4.0273 3.2656-7.293 7.293-7.293h147.38c4.0078 0.050781 7.2422 3.2852 7.293 7.293z"></path></svg></span></button><div class="s1fux44s"><code class="ch91s9f prism-code language-javascript" style="color:#F8F8F2;background-color:#282A36"><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> url </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">URL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://example.com:3000/path?test=1#hash&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">hostname</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">pathname</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">search</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">hash</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// And many others...</span></div></code></div><div class="w1fan3zt"><div class="slkqgdl"><div class="h1ar9408"><h3 class="lsty687 h1va7th9">Console:</h3></div><div class="c4lgw7o"></div><div class="fc6lgc4"></div></div></div></div></pre><p class="p2azb0q">Here&#x27;s a list of all the properties that are supported: <a target="_blank" class="lmm5nmn" href="https://developer.mozilla.org/en-US/docs/Web/API/URL#properties">https://developer.mozilla.org/en-US/docs/Web/API/URL#properties</a></p><h3 class="h1kb6pbt">Absolute URLs</h3><p class="p2azb0q">Another great thing about <code class="wwej1dx">URL</code> is that it can convert relative URLs into absolute URLs, similar to <a target="_blank" class="lmm5nmn" href="https://nodejs.org/api/url.html#urlresolvefrom-to"><code class="wwej1dx">url.resolve</code></a> in Node.js:</p><pre><div class="w13c3r7c"><button aria-label="Copy text to clipboard" class="budyhtb c1up212z"><span aria-hidden="true" class="c180lrjy">Copied âœ¨</span><span class="t1ypji8z"><svg aria-hidden="true" width="752pt" height="752pt" version="1.1" viewBox="0 0 752 752" xmlns="http://www.w3.org/2000/svg"><path d="m486.91 229.86h-147.38c-9.6719 0-18.945 3.8398-25.785 10.68s-10.68 16.113-10.68 25.785v35.52h-37.887c-9.6562-0.027344-18.926 3.7773-25.781 10.578-6.8516 6.8008-10.73 16.043-10.781 25.695v147.57c0.027344 9.6641 3.875 18.922 10.711 25.758 6.832 6.832 16.094 10.684 25.758 10.707h147.38c9.668 0 18.945-3.8438 25.785-10.68 6.8359-6.8398 10.68-16.113 10.68-25.785v-35.52h37.887c9.6523 0.023438 18.926-3.7812 25.777-10.578 6.8555-6.8008 10.73-16.043 10.781-25.699v-147.57c-0.023437-9.6641-3.875-18.926-10.707-25.758s-16.094-10.684-25.758-10.707zm-67.152 255.73c0 4.0273-3.2656 7.293-7.293 7.293h-147.38c-4.0078-0.050781-7.2422-3.2891-7.293-7.293v-147.48c0-4.0273 3.2656-7.293 7.293-7.293h147.38c1.9414-0.023437 3.8086 0.73438 5.1836 2.1094s2.1328 3.2422 2.1094 5.1836v147.57zm74.445-71.703c0 4.0273-3.2656 7.293-7.293 7.293h-37.887v-83.066c0-9.668-3.8398-18.945-10.68-25.785-6.8398-6.8359-16.113-10.68-25.785-10.68h-80.32v-35.328c0-4.0273 3.2656-7.293 7.293-7.293h147.38c4.0078 0.050781 7.2422 3.2852 7.293 7.293z"></path></svg></span></button><div class="s1fux44s"><code class="ch91s9f prism-code language-javascript" style="color:#F8F8F2;background-color:#282A36"><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">toAbsoluteUrl</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">base</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> relativeUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">URL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">relativeUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> base</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">toString</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">BASE_URL</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://base-url/path/&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">toAbsoluteUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token constant" style="color:rgb(189, 147, 249)">BASE_URL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/absolute-path&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">toAbsoluteUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token constant" style="color:rgb(189, 147, 249)">BASE_URL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;relative-path&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">toAbsoluteUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token constant" style="color:rgb(189, 147, 249)">BASE_URL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;../relative-path&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></div><div class="w1fan3zt"><div class="slkqgdl"><div class="h1ar9408"><h3 class="lsty687 h1va7th9">Console:</h3></div><div class="c4lgw7o"></div><div class="fc6lgc4"></div></div></div></div></pre><h3 class="h1kb6pbt">Query String Parsing</h3><p class="p2azb0q">Browsers also have the ability to parse query strings in a similar fashion to the <code class="wwej1dx">URL</code> constructor. The API is called <a target="_blank" class="lmm5nmn" href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams"><code class="wwej1dx">URLSearchParams</code></a> and it&#x27;s packed with everything we could possibly need when it comes to query parameters.</p><p class="p2azb0q">This example shows how we can extract parameters from a query string:</p><pre><div class="w13c3r7c"><button aria-label="Copy text to clipboard" class="budyhtb c1up212z"><span aria-hidden="true" class="c180lrjy">Copied âœ¨</span><span class="t1ypji8z"><svg aria-hidden="true" width="752pt" height="752pt" version="1.1" viewBox="0 0 752 752" xmlns="http://www.w3.org/2000/svg"><path d="m486.91 229.86h-147.38c-9.6719 0-18.945 3.8398-25.785 10.68s-10.68 16.113-10.68 25.785v35.52h-37.887c-9.6562-0.027344-18.926 3.7773-25.781 10.578-6.8516 6.8008-10.73 16.043-10.781 25.695v147.57c0.027344 9.6641 3.875 18.922 10.711 25.758 6.832 6.832 16.094 10.684 25.758 10.707h147.38c9.668 0 18.945-3.8438 25.785-10.68 6.8359-6.8398 10.68-16.113 10.68-25.785v-35.52h37.887c9.6523 0.023438 18.926-3.7812 25.777-10.578 6.8555-6.8008 10.73-16.043 10.781-25.699v-147.57c-0.023437-9.6641-3.875-18.926-10.707-25.758s-16.094-10.684-25.758-10.707zm-67.152 255.73c0 4.0273-3.2656 7.293-7.293 7.293h-147.38c-4.0078-0.050781-7.2422-3.2891-7.293-7.293v-147.48c0-4.0273 3.2656-7.293 7.293-7.293h147.38c1.9414-0.023437 3.8086 0.73438 5.1836 2.1094s2.1328 3.2422 2.1094 5.1836v147.57zm74.445-71.703c0 4.0273-3.2656 7.293-7.293 7.293h-37.887v-83.066c0-9.668-3.8398-18.945-10.68-25.785-6.8398-6.8359-16.113-10.68-25.785-10.68h-80.32v-35.328c0-4.0273 3.2656-7.293 7.293-7.293h147.38c4.0078 0.050781 7.2422 3.2852 7.293 7.293z"></path></svg></span></button><div class="s1fux44s"><code class="ch91s9f prism-code language-javascript" style="color:#F8F8F2;background-color:#282A36"><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> params </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">URLSearchParams</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;?query=1&amp;test=Hello%20world&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">params</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;query&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">params</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></div><div class="w1fan3zt"><div class="slkqgdl"><div class="h1ar9408"><h3 class="lsty687 h1va7th9">Console:</h3></div><div class="c4lgw7o"></div><div class="fc6lgc4"></div></div></div></div></pre><p class="p2azb0q">Here&#x27;s a list of all the methods that are supported: <a target="_blank" class="lmm5nmn" href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams#methods">https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams#methods</a></p><p class="p2azb0q">We can also use a combination of <code class="wwej1dx">URLSearchParams</code> and <a target="_blank" class="lmm5nmn" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries"><code class="wwej1dx">Object.fromEntries</code></a> to turn query strings into plain JavaScript objects:</p><pre><div class="w13c3r7c"><button aria-label="Copy text to clipboard" class="budyhtb c1up212z"><span aria-hidden="true" class="c180lrjy">Copied âœ¨</span><span class="t1ypji8z"><svg aria-hidden="true" width="752pt" height="752pt" version="1.1" viewBox="0 0 752 752" xmlns="http://www.w3.org/2000/svg"><path d="m486.91 229.86h-147.38c-9.6719 0-18.945 3.8398-25.785 10.68s-10.68 16.113-10.68 25.785v35.52h-37.887c-9.6562-0.027344-18.926 3.7773-25.781 10.578-6.8516 6.8008-10.73 16.043-10.781 25.695v147.57c0.027344 9.6641 3.875 18.922 10.711 25.758 6.832 6.832 16.094 10.684 25.758 10.707h147.38c9.668 0 18.945-3.8438 25.785-10.68 6.8359-6.8398 10.68-16.113 10.68-25.785v-35.52h37.887c9.6523 0.023438 18.926-3.7812 25.777-10.578 6.8555-6.8008 10.73-16.043 10.781-25.699v-147.57c-0.023437-9.6641-3.875-18.926-10.707-25.758s-16.094-10.684-25.758-10.707zm-67.152 255.73c0 4.0273-3.2656 7.293-7.293 7.293h-147.38c-4.0078-0.050781-7.2422-3.2891-7.293-7.293v-147.48c0-4.0273 3.2656-7.293 7.293-7.293h147.38c1.9414-0.023437 3.8086 0.73438 5.1836 2.1094s2.1328 3.2422 2.1094 5.1836v147.57zm74.445-71.703c0 4.0273-3.2656 7.293-7.293 7.293h-37.887v-83.066c0-9.668-3.8398-18.945-10.68-25.785-6.8398-6.8359-16.113-10.68-25.785-10.68h-80.32v-35.328c0-4.0273 3.2656-7.293 7.293-7.293h147.38c4.0078 0.050781 7.2422 3.2852 7.293 7.293z"></path></svg></span></button><div class="s1fux44s"><code class="ch91s9f prism-code language-javascript" style="color:#F8F8F2;background-color:#282A36"><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">parseQueryString</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">queryString</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">fromEntries</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">URLSearchParams</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">queryString</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">parseQueryString</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;?query=1&amp;test=Hello%20World&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></div><div class="w1fan3zt"><div class="slkqgdl"><div class="h1ar9408"><h3 class="lsty687 h1va7th9">Console:</h3></div><div class="c4lgw7o"></div><div class="fc6lgc4"></div></div></div></div></pre><h3 class="h1kb6pbt">Query Params Stringification</h3><p class="p2azb0q">Great, we can parse query strings but what about the opposite. What if we have a bunch of values and we want to turn them into a query string?</p><p class="p2azb0q">I&#x27;ve lost count of the number of times I&#x27;ve seen API calls like the one below (<strong>disclaimer:</strong> I&#x27;m guilty of having done this several times).</p><pre><div class="w13c3r7c"><button aria-label="Copy text to clipboard" class="budyhtb c1up212z"><span aria-hidden="true" class="c180lrjy">Copied âœ¨</span><span class="t1ypji8z"><svg aria-hidden="true" width="752pt" height="752pt" version="1.1" viewBox="0 0 752 752" xmlns="http://www.w3.org/2000/svg"><path d="m486.91 229.86h-147.38c-9.6719 0-18.945 3.8398-25.785 10.68s-10.68 16.113-10.68 25.785v35.52h-37.887c-9.6562-0.027344-18.926 3.7773-25.781 10.578-6.8516 6.8008-10.73 16.043-10.781 25.695v147.57c0.027344 9.6641 3.875 18.922 10.711 25.758 6.832 6.832 16.094 10.684 25.758 10.707h147.38c9.668 0 18.945-3.8438 25.785-10.68 6.8359-6.8398 10.68-16.113 10.68-25.785v-35.52h37.887c9.6523 0.023438 18.926-3.7812 25.777-10.578 6.8555-6.8008 10.73-16.043 10.781-25.699v-147.57c-0.023437-9.6641-3.875-18.926-10.707-25.758s-16.094-10.684-25.758-10.707zm-67.152 255.73c0 4.0273-3.2656 7.293-7.293 7.293h-147.38c-4.0078-0.050781-7.2422-3.2891-7.293-7.293v-147.48c0-4.0273 3.2656-7.293 7.293-7.293h147.38c1.9414-0.023437 3.8086 0.73438 5.1836 2.1094s2.1328 3.2422 2.1094 5.1836v147.57zm74.445-71.703c0 4.0273-3.2656 7.293-7.293 7.293h-37.887v-83.066c0-9.668-3.8398-18.945-10.68-25.785-6.8398-6.8359-16.113-10.68-25.785-10.68h-80.32v-35.328c0-4.0273 3.2656-7.293 7.293-7.293h147.38c4.0078 0.050781 7.2422 3.2852 7.293 7.293z"></path></svg></span></button><div class="s1fux44s"><code class="ch91s9f prism-code language-javascript" style="color:#F8F8F2;background-color:#282A36"><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// ðŸš« Don&#x27;t do this (keep reading)</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">fetchProducts</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token parameter"> brand</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> inStock</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> limit </span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fetch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">    </span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">https://api.example.com/products?brand=</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation function" style="color:rgb(80, 250, 123)">encodeURIComponent</span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string interpolation"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token template-string interpolation">      brand</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token template-string interpolation">    </span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)">&amp;inStock=</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">inStock</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)">&amp;limit=</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">limit</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fetchProducts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">brand</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Bang &amp; Olufsen&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">inStock</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">limit</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></div><div class="w1fan3zt"><div class="slkqgdl"><div class="h1ar9408"><h3 class="lsty687 h1va7th9">Console:</h3></div><div class="c4lgw7o"></div><div class="fc6lgc4"></div></div></div></div></pre><p class="p2azb0q">While this works, there are many things that can be improved.</p><ul class="l1awkrss"><li class="l1jcz6ni">It is hard to read - even more so with prettier doing its best to keep the line length under control.</li><li class="l1jcz6ni">It&#x27;s fragile - we&#x27;re one bad keystroke away from messing up our URL.</li><li class="l1jcz6ni">We have to manually encode string parameters with <code class="wwej1dx">encodeURIComponent</code>.</li></ul><p class="p2azb0q">I&#x27;ve used the <a target="_blank" class="lmm5nmn" href="https://www.npmjs.com/package/qs">qs</a> package in the past to address these issues but there is no need to increase the size of our JavaScript bundle with yet another package, we can once again rely on <a target="_blank" class="lmm5nmn" href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams"><code class="wwej1dx">URLSearchParams</code></a> to do the job for us.</p><p class="p2azb0q">I think we can all agree that this is much more readable (with the added bonus that the url encoding is taken care of):</p><pre><div class="w13c3r7c"><button aria-label="Copy text to clipboard" class="budyhtb c1up212z"><span aria-hidden="true" class="c180lrjy">Copied âœ¨</span><span class="t1ypji8z"><svg aria-hidden="true" width="752pt" height="752pt" version="1.1" viewBox="0 0 752 752" xmlns="http://www.w3.org/2000/svg"><path d="m486.91 229.86h-147.38c-9.6719 0-18.945 3.8398-25.785 10.68s-10.68 16.113-10.68 25.785v35.52h-37.887c-9.6562-0.027344-18.926 3.7773-25.781 10.578-6.8516 6.8008-10.73 16.043-10.781 25.695v147.57c0.027344 9.6641 3.875 18.922 10.711 25.758 6.832 6.832 16.094 10.684 25.758 10.707h147.38c9.668 0 18.945-3.8438 25.785-10.68 6.8359-6.8398 10.68-16.113 10.68-25.785v-35.52h37.887c9.6523 0.023438 18.926-3.7812 25.777-10.578 6.8555-6.8008 10.73-16.043 10.781-25.699v-147.57c-0.023437-9.6641-3.875-18.926-10.707-25.758s-16.094-10.684-25.758-10.707zm-67.152 255.73c0 4.0273-3.2656 7.293-7.293 7.293h-147.38c-4.0078-0.050781-7.2422-3.2891-7.293-7.293v-147.48c0-4.0273 3.2656-7.293 7.293-7.293h147.38c1.9414-0.023437 3.8086 0.73438 5.1836 2.1094s2.1328 3.2422 2.1094 5.1836v147.57zm74.445-71.703c0 4.0273-3.2656 7.293-7.293 7.293h-37.887v-83.066c0-9.668-3.8398-18.945-10.68-25.785-6.8398-6.8359-16.113-10.68-25.785-10.68h-80.32v-35.328c0-4.0273 3.2656-7.293 7.293-7.293h147.38c4.0078 0.050781 7.2422 3.2852 7.293 7.293z"></path></svg></span></button><div class="s1fux44s"><code class="ch91s9f prism-code language-javascript" style="color:#F8F8F2;background-color:#282A36"><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">fetchProducts</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token parameter"> brand</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> inStock</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> limit </span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fetch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">    </span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">https://api.example.com/products?</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation class-name">URLSearchParams</span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token template-string interpolation"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token template-string interpolation">      brand</span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token template-string interpolation"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token template-string interpolation">      inStock</span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token template-string interpolation"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token template-string interpolation">      limit</span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token template-string interpolation"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token template-string interpolation">    </span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fetchProducts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">brand</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Bang &amp; Olufsen&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">inStock</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">limit</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></div><div class="w1fan3zt"><div class="slkqgdl"><div class="h1ar9408"><h3 class="lsty687 h1va7th9">Console:</h3></div><div class="c4lgw7o"></div><div class="fc6lgc4"></div></div></div></div></pre><h3 class="h1kb6pbt">Utility Function</h3><p class="p2azb0q">If you&#x27;re feeling nostalgic, you might want to create an abstraction around <code class="wwej1dx">URLSearchParams</code> that mimics the API of the <a target="_blank" class="lmm5nmn" href="https://www.npmjs.com/package/qs">qs</a> module:</p><pre><div class="w13c3r7c"><button aria-label="Copy text to clipboard" class="budyhtb c1up212z"><span aria-hidden="true" class="c180lrjy">Copied âœ¨</span><span class="t1ypji8z"><svg aria-hidden="true" width="752pt" height="752pt" version="1.1" viewBox="0 0 752 752" xmlns="http://www.w3.org/2000/svg"><path d="m486.91 229.86h-147.38c-9.6719 0-18.945 3.8398-25.785 10.68s-10.68 16.113-10.68 25.785v35.52h-37.887c-9.6562-0.027344-18.926 3.7773-25.781 10.578-6.8516 6.8008-10.73 16.043-10.781 25.695v147.57c0.027344 9.6641 3.875 18.922 10.711 25.758 6.832 6.832 16.094 10.684 25.758 10.707h147.38c9.668 0 18.945-3.8438 25.785-10.68 6.8359-6.8398 10.68-16.113 10.68-25.785v-35.52h37.887c9.6523 0.023438 18.926-3.7812 25.777-10.578 6.8555-6.8008 10.73-16.043 10.781-25.699v-147.57c-0.023437-9.6641-3.875-18.926-10.707-25.758s-16.094-10.684-25.758-10.707zm-67.152 255.73c0 4.0273-3.2656 7.293-7.293 7.293h-147.38c-4.0078-0.050781-7.2422-3.2891-7.293-7.293v-147.48c0-4.0273 3.2656-7.293 7.293-7.293h147.38c1.9414-0.023437 3.8086 0.73438 5.1836 2.1094s2.1328 3.2422 2.1094 5.1836v147.57zm74.445-71.703c0 4.0273-3.2656 7.293-7.293 7.293h-37.887v-83.066c0-9.668-3.8398-18.945-10.68-25.785-6.8398-6.8359-16.113-10.68-25.785-10.68h-80.32v-35.328c0-4.0273 3.2656-7.293 7.293-7.293h147.38c4.0078 0.050781 7.2422 3.2852 7.293 7.293z"></path></svg></span></button><div class="s1fux44s"><code class="ch91s9f prism-code language-javascript" style="color:#F8F8F2;background-color:#282A36"><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">parse</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">queryString</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">fromEntries</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">URLSearchParams</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">queryString</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">stringify</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">queryObject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">URLSearchParams</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">queryObject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">toString</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> qs </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  parse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  stringify</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain"> qs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></div></div></pre><h2 class="hu9il03">Strings</h2><p class="p2azb0q">Doing a check with <code class="wwej1dx">String.indexOf(...) &gt; -1</code> should be a thing of the past.</p><p class="p2azb0q">Browsers are making our lives easier with the addition of new <code class="wwej1dx">String</code> methods such as <code class="wwej1dx">includes</code> and <code class="wwej1dx">startsWith</code>.</p><pre><div class="w13c3r7c"><button aria-label="Copy text to clipboard" class="budyhtb c1up212z"><span aria-hidden="true" class="c180lrjy">Copied âœ¨</span><span class="t1ypji8z"><svg aria-hidden="true" width="752pt" height="752pt" version="1.1" viewBox="0 0 752 752" xmlns="http://www.w3.org/2000/svg"><path d="m486.91 229.86h-147.38c-9.6719 0-18.945 3.8398-25.785 10.68s-10.68 16.113-10.68 25.785v35.52h-37.887c-9.6562-0.027344-18.926 3.7773-25.781 10.578-6.8516 6.8008-10.73 16.043-10.781 25.695v147.57c0.027344 9.6641 3.875 18.922 10.711 25.758 6.832 6.832 16.094 10.684 25.758 10.707h147.38c9.668 0 18.945-3.8438 25.785-10.68 6.8359-6.8398 10.68-16.113 10.68-25.785v-35.52h37.887c9.6523 0.023438 18.926-3.7812 25.777-10.578 6.8555-6.8008 10.73-16.043 10.781-25.699v-147.57c-0.023437-9.6641-3.875-18.926-10.707-25.758s-16.094-10.684-25.758-10.707zm-67.152 255.73c0 4.0273-3.2656 7.293-7.293 7.293h-147.38c-4.0078-0.050781-7.2422-3.2891-7.293-7.293v-147.48c0-4.0273 3.2656-7.293 7.293-7.293h147.38c1.9414-0.023437 3.8086 0.73438 5.1836 2.1094s2.1328 3.2422 2.1094 5.1836v147.57zm74.445-71.703c0 4.0273-3.2656 7.293-7.293 7.293h-37.887v-83.066c0-9.668-3.8398-18.945-10.68-25.785-6.8398-6.8359-16.113-10.68-25.785-10.68h-80.32v-35.328c0-4.0273 3.2656-7.293 7.293-7.293h147.38c4.0078 0.050781 7.2422 3.2852 7.293 7.293z"></path></svg></span></button><div class="s1fux44s"><code class="ch91s9f prism-code language-javascript" style="color:#F8F8F2;background-color:#282A36"><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> startsWith </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Hello world&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">startsWith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Hello&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> endsWith </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Hello world&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">endsWith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> includes </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Hello world&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">includes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">startsWith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> endsWith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> includes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></div><div class="w1fan3zt"><div class="slkqgdl"><div class="h1ar9408"><h3 class="lsty687 h1va7th9">Console:</h3></div><div class="c4lgw7o"></div><div class="fc6lgc4"></div></div></div></div></pre><p class="p2azb0q">Here&#x27;s the full list of supported methods: <a target="_blank" class="lmm5nmn" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String#instance_methods">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String#instance_methods</a></p><h3 class="h1kb6pbt">Removing Accents</h3><p class="p2azb0q">Removing diacritics from a string is definitely not something I want to do by hand. I&#x27;ve previously relied on lodash&#x27;s
<a target="_blank" class="lmm5nmn" href="https://lodash.com/docs/4.17.15#deburr"><code class="wwej1dx">deburr</code></a> function to do the job but I recently found out that it can be done with this one-liner:</p><pre><div class="w13c3r7c"><button aria-label="Copy text to clipboard" class="budyhtb c1up212z"><span aria-hidden="true" class="c180lrjy">Copied âœ¨</span><span class="t1ypji8z"><svg aria-hidden="true" width="752pt" height="752pt" version="1.1" viewBox="0 0 752 752" xmlns="http://www.w3.org/2000/svg"><path d="m486.91 229.86h-147.38c-9.6719 0-18.945 3.8398-25.785 10.68s-10.68 16.113-10.68 25.785v35.52h-37.887c-9.6562-0.027344-18.926 3.7773-25.781 10.578-6.8516 6.8008-10.73 16.043-10.781 25.695v147.57c0.027344 9.6641 3.875 18.922 10.711 25.758 6.832 6.832 16.094 10.684 25.758 10.707h147.38c9.668 0 18.945-3.8438 25.785-10.68 6.8359-6.8398 10.68-16.113 10.68-25.785v-35.52h37.887c9.6523 0.023438 18.926-3.7812 25.777-10.578 6.8555-6.8008 10.73-16.043 10.781-25.699v-147.57c-0.023437-9.6641-3.875-18.926-10.707-25.758s-16.094-10.684-25.758-10.707zm-67.152 255.73c0 4.0273-3.2656 7.293-7.293 7.293h-147.38c-4.0078-0.050781-7.2422-3.2891-7.293-7.293v-147.48c0-4.0273 3.2656-7.293 7.293-7.293h147.38c1.9414-0.023437 3.8086 0.73438 5.1836 2.1094s2.1328 3.2422 2.1094 5.1836v147.57zm74.445-71.703c0 4.0273-3.2656 7.293-7.293 7.293h-37.887v-83.066c0-9.668-3.8398-18.945-10.68-25.785-6.8398-6.8359-16.113-10.68-25.785-10.68h-80.32v-35.328c0-4.0273 3.2656-7.293 7.293-7.293h147.38c4.0078 0.050781 7.2422 3.2852 7.293 7.293z"></path></svg></span></button><div class="s1fux44s"><code class="ch91s9f prism-code language-javascript" style="color:#F8F8F2;background-color:#282A36"><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">removeAccents</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">normalize</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;NFD&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">replace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">[\u0300-\u036f]</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-flags">g</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">removeAccents</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;HÃ©tÃ©rogÃ©nÃ©itÃ©&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></div><div class="w1fan3zt"><div class="slkqgdl"><div class="h1ar9408"><h3 class="lsty687 h1va7th9">Console:</h3></div><div class="c4lgw7o"></div><div class="fc6lgc4"></div></div></div></div></pre><h3 class="h1kb6pbt">HTML Encoding</h3><p class="p2azb0q">We sometimes need to sanitize untrusted strings to prevent XSS vulnerabilities. We usually do this by encoding HTML entities so that they are not interpreted as code once rendered in our document.</p><p class="p2azb0q">If we look on the internet for how to HTML-encode a piece of text, we mostly find answers involving regular expressions:</p><ul class="l1awkrss"><li class="l1jcz6ni"><a target="_blank" class="lmm5nmn" href="https://stackoverflow.com/questions/14129953/how-to-encode-a-string-in-javascript-for-displaying-in-html">How to encode a string in JavaScript for displaying in HTML?</a></li><li class="l1jcz6ni"><a target="_blank" class="lmm5nmn" href="https://stackoverflow.com/questions/3043775/how-to-escape-html">How to escape HTML</a></li></ul><p class="p2azb0q">Personally, the farther I stay away from regular expressions the better, especially when writing code that revolves around security. If there&#x27;s one thing browsers are good at, it&#x27;s HTML.</p><p class="p2azb0q">In this example we leverage the browser&#x27;s built-in HTML parser to safely encode a piece of untrusted data.</p><pre><div class="w13c3r7c"><button aria-label="Copy text to clipboard" class="budyhtb c1up212z"><span aria-hidden="true" class="c180lrjy">Copied âœ¨</span><span class="t1ypji8z"><svg aria-hidden="true" width="752pt" height="752pt" version="1.1" viewBox="0 0 752 752" xmlns="http://www.w3.org/2000/svg"><path d="m486.91 229.86h-147.38c-9.6719 0-18.945 3.8398-25.785 10.68s-10.68 16.113-10.68 25.785v35.52h-37.887c-9.6562-0.027344-18.926 3.7773-25.781 10.578-6.8516 6.8008-10.73 16.043-10.781 25.695v147.57c0.027344 9.6641 3.875 18.922 10.711 25.758 6.832 6.832 16.094 10.684 25.758 10.707h147.38c9.668 0 18.945-3.8438 25.785-10.68 6.8359-6.8398 10.68-16.113 10.68-25.785v-35.52h37.887c9.6523 0.023438 18.926-3.7812 25.777-10.578 6.8555-6.8008 10.73-16.043 10.781-25.699v-147.57c-0.023437-9.6641-3.875-18.926-10.707-25.758s-16.094-10.684-25.758-10.707zm-67.152 255.73c0 4.0273-3.2656 7.293-7.293 7.293h-147.38c-4.0078-0.050781-7.2422-3.2891-7.293-7.293v-147.48c0-4.0273 3.2656-7.293 7.293-7.293h147.38c1.9414-0.023437 3.8086 0.73438 5.1836 2.1094s2.1328 3.2422 2.1094 5.1836v147.57zm74.445-71.703c0 4.0273-3.2656 7.293-7.293 7.293h-37.887v-83.066c0-9.668-3.8398-18.945-10.68-25.785-6.8398-6.8359-16.113-10.68-25.785-10.68h-80.32v-35.328c0-4.0273 3.2656-7.293 7.293-7.293h147.38c4.0078 0.050781 7.2422 3.2852 7.293 7.293z"></path></svg></span></button><div class="s1fux44s"><code class="ch91s9f prism-code language-javascript" style="color:#F8F8F2;background-color:#282A36"><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">encodeHtmlEntities</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> parent </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(189, 147, 249);font-style:italic">document</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">createElement</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;div&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  parent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">appendChild</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Text</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> parent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">innerHTML</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">encodeHtmlEntities</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">&lt;img src=&quot;&quot; onerror=&quot;alert(&#x27;xss&#x27;)&quot; /&gt;</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></div><div class="w1fan3zt"><div class="slkqgdl"><div class="h1ar9408"><h3 class="lsty687 h1va7th9">Console:</h3></div><div class="c4lgw7o"></div><div class="fc6lgc4"></div></div></div></div></pre><p class="p2azb0q">The special ingredient here is the <a target="_blank" class="lmm5nmn" href="https://developer.mozilla.org/en-US/docs/Web/API/Text"><code class="wwej1dx">Text</code></a> constructor. Browsers will properly escape any string you throw at it. You can learn more about it here: <a target="_blank" class="lmm5nmn" href="https://developer.mozilla.org/en-US/docs/Web/API/Text">https://developer.mozilla.org/en-US/docs/Web/API/Text</a></p><h3 class="h1kb6pbt">Extract Text from Html</h3><p class="p2azb0q">Data can be messy sometimes. We might be pulling data from an old API built by someone who thought it was a good idea to store HTML in their database.</p><p class="p2azb0q">The <a target="_blank" class="lmm5nmn" href="https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString"><code class="wwej1dx">DOMParser</code></a> API can help us in such scenario. It provides a way to leverage the browser&#x27;s built-in DOM parser without interfering with the main document.</p><pre><div class="w13c3r7c"><button aria-label="Copy text to clipboard" class="budyhtb c1up212z"><span aria-hidden="true" class="c180lrjy">Copied âœ¨</span><span class="t1ypji8z"><svg aria-hidden="true" width="752pt" height="752pt" version="1.1" viewBox="0 0 752 752" xmlns="http://www.w3.org/2000/svg"><path d="m486.91 229.86h-147.38c-9.6719 0-18.945 3.8398-25.785 10.68s-10.68 16.113-10.68 25.785v35.52h-37.887c-9.6562-0.027344-18.926 3.7773-25.781 10.578-6.8516 6.8008-10.73 16.043-10.781 25.695v147.57c0.027344 9.6641 3.875 18.922 10.711 25.758 6.832 6.832 16.094 10.684 25.758 10.707h147.38c9.668 0 18.945-3.8438 25.785-10.68 6.8359-6.8398 10.68-16.113 10.68-25.785v-35.52h37.887c9.6523 0.023438 18.926-3.7812 25.777-10.578 6.8555-6.8008 10.73-16.043 10.781-25.699v-147.57c-0.023437-9.6641-3.875-18.926-10.707-25.758s-16.094-10.684-25.758-10.707zm-67.152 255.73c0 4.0273-3.2656 7.293-7.293 7.293h-147.38c-4.0078-0.050781-7.2422-3.2891-7.293-7.293v-147.48c0-4.0273 3.2656-7.293 7.293-7.293h147.38c1.9414-0.023437 3.8086 0.73438 5.1836 2.1094s2.1328 3.2422 2.1094 5.1836v147.57zm74.445-71.703c0 4.0273-3.2656 7.293-7.293 7.293h-37.887v-83.066c0-9.668-3.8398-18.945-10.68-25.785-6.8398-6.8359-16.113-10.68-25.785-10.68h-80.32v-35.328c0-4.0273 3.2656-7.293 7.293-7.293h147.38c4.0078 0.050781 7.2422 3.2852 7.293 7.293z"></path></svg></span></button><div class="s1fux44s"><code class="ch91s9f prism-code language-javascript" style="color:#F8F8F2;background-color:#282A36"><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">stripHtml</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">html</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> documentElement </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">DOMParser</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">parseFromString</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">    html</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;text/html&quot;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> documentElement</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">textContent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">stripHtml</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">&lt;p&gt;This is some text&lt;/p&gt;</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">stripHtml</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">&lt;img src=&quot;&quot; onerror=&quot;alert(&#x27;xss&#x27;)&quot; /&gt;</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></div><div class="w1fan3zt"><div class="slkqgdl"><div class="h1ar9408"><h3 class="lsty687 h1va7th9">Console:</h3></div><div class="c4lgw7o"></div><div class="fc6lgc4"></div></div></div></div></pre><p class="p2azb0q">I sincerely hope you never have to but you can also use the <code class="wwej1dx">DOMParser</code> API to parse XML documents: <a target="_blank" class="lmm5nmn" href="https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString">https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString</a></p><h2 class="hu9il03">Client-side Validations</h2><p class="p2azb0q">Client-side validation can be a pain. There is a lot of disagreement about how user inputs should be validated. Most of the debate is over which regex is best for performing a given task. I prefer to look from the sidelines and let the browser do the validation for me when possible.</p><h3 class="h1kb6pbt">Validating Email Addresses</h3><p class="p2azb0q">As far as I know, there is no built-in function we can call to get a clear <a target="_blank" class="lmm5nmn" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/canPlayType">yes or no</a> whether an email is syntactically valid but we can use the <a target="_blank" class="lmm5nmn" href="https://developer.mozilla.org/en-US/docs/Web/API/Constraint_validation">Constraint Validation API</a> and a bit of DOM wizardry to achieve just that:</p><pre><div class="w13c3r7c"><button aria-label="Copy text to clipboard" class="budyhtb c1up212z"><span aria-hidden="true" class="c180lrjy">Copied âœ¨</span><span class="t1ypji8z"><svg aria-hidden="true" width="752pt" height="752pt" version="1.1" viewBox="0 0 752 752" xmlns="http://www.w3.org/2000/svg"><path d="m486.91 229.86h-147.38c-9.6719 0-18.945 3.8398-25.785 10.68s-10.68 16.113-10.68 25.785v35.52h-37.887c-9.6562-0.027344-18.926 3.7773-25.781 10.578-6.8516 6.8008-10.73 16.043-10.781 25.695v147.57c0.027344 9.6641 3.875 18.922 10.711 25.758 6.832 6.832 16.094 10.684 25.758 10.707h147.38c9.668 0 18.945-3.8438 25.785-10.68 6.8359-6.8398 10.68-16.113 10.68-25.785v-35.52h37.887c9.6523 0.023438 18.926-3.7812 25.777-10.578 6.8555-6.8008 10.73-16.043 10.781-25.699v-147.57c-0.023437-9.6641-3.875-18.926-10.707-25.758s-16.094-10.684-25.758-10.707zm-67.152 255.73c0 4.0273-3.2656 7.293-7.293 7.293h-147.38c-4.0078-0.050781-7.2422-3.2891-7.293-7.293v-147.48c0-4.0273 3.2656-7.293 7.293-7.293h147.38c1.9414-0.023437 3.8086 0.73438 5.1836 2.1094s2.1328 3.2422 2.1094 5.1836v147.57zm74.445-71.703c0 4.0273-3.2656 7.293-7.293 7.293h-37.887v-83.066c0-9.668-3.8398-18.945-10.68-25.785-6.8398-6.8359-16.113-10.68-25.785-10.68h-80.32v-35.328c0-4.0273 3.2656-7.293 7.293-7.293h147.38c4.0078 0.050781 7.2422 3.2852 7.293 7.293z"></path></svg></span></button><div class="s1fux44s"><code class="ch91s9f prism-code language-javascript" style="color:#F8F8F2;background-color:#282A36"><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">validateEmail</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">email</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> input </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(189, 147, 249);font-style:italic">document</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">createElement</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;input&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;email&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">required</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> email</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">checkValidity</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">validateEmail</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test@example.com&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">validateEmail</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test@localhost&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">validateEmail</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;not-an-email&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></div><div class="w1fan3zt"><div class="slkqgdl"><div class="h1ar9408"><h3 class="lsty687 h1va7th9">Console:</h3></div><div class="c4lgw7o"></div><div class="fc6lgc4"></div></div></div></div></pre><p class="p2azb0q"><strong>Note:</strong> this code won&#x27;t work server-side as it relies on the DOM but this doesn&#x27;t mean that we shouldn&#x27;t validate email addresses on the backend too.</p><h3 class="h1kb6pbt">URL Validation</h3><p class="p2azb0q">The <a target="_blank" class="lmm5nmn" href="https://developer.mozilla.org/en-US/docs/Web/API/URL"><code class="wwej1dx">URL</code></a> constructor turn out to be useful once again. Here we rely on the fact that it throws an exception if the given URL is invalid in addition to making sure the protocol matches a set of expected values:</p><pre><div class="w13c3r7c"><button aria-label="Copy text to clipboard" class="budyhtb c1up212z"><span aria-hidden="true" class="c180lrjy">Copied âœ¨</span><span class="t1ypji8z"><svg aria-hidden="true" width="752pt" height="752pt" version="1.1" viewBox="0 0 752 752" xmlns="http://www.w3.org/2000/svg"><path d="m486.91 229.86h-147.38c-9.6719 0-18.945 3.8398-25.785 10.68s-10.68 16.113-10.68 25.785v35.52h-37.887c-9.6562-0.027344-18.926 3.7773-25.781 10.578-6.8516 6.8008-10.73 16.043-10.781 25.695v147.57c0.027344 9.6641 3.875 18.922 10.711 25.758 6.832 6.832 16.094 10.684 25.758 10.707h147.38c9.668 0 18.945-3.8438 25.785-10.68 6.8359-6.8398 10.68-16.113 10.68-25.785v-35.52h37.887c9.6523 0.023438 18.926-3.7812 25.777-10.578 6.8555-6.8008 10.73-16.043 10.781-25.699v-147.57c-0.023437-9.6641-3.875-18.926-10.707-25.758s-16.094-10.684-25.758-10.707zm-67.152 255.73c0 4.0273-3.2656 7.293-7.293 7.293h-147.38c-4.0078-0.050781-7.2422-3.2891-7.293-7.293v-147.48c0-4.0273 3.2656-7.293 7.293-7.293h147.38c1.9414-0.023437 3.8086 0.73438 5.1836 2.1094s2.1328 3.2422 2.1094 5.1836v147.57zm74.445-71.703c0 4.0273-3.2656 7.293-7.293 7.293h-37.887v-83.066c0-9.668-3.8398-18.945-10.68-25.785-6.8398-6.8359-16.113-10.68-25.785-10.68h-80.32v-35.328c0-4.0273 3.2656-7.293 7.293-7.293h147.38c4.0078 0.050781 7.2422 3.2852 7.293 7.293z"></path></svg></span></button><div class="s1fux44s"><code class="ch91s9f prism-code language-javascript" style="color:#F8F8F2;background-color:#282A36"><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">validateUrl</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;http:&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https:&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">includes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">URL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">validateUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">https://example.com/path/</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">validateUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">wss://example.com/path/</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">validateUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">javascript:alert(&quot;XSS&quot;)</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line l1dxgt6u" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">validateUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">not-a-url</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></div><div class="w1fan3zt"><div class="slkqgdl"><div class="h1ar9408"><h3 class="lsty687 h1va7th9">Console:</h3></div><div class="c4lgw7o"></div><div class="fc6lgc4"></div></div></div></div></pre><h2 class="hu9il03">Wrapping Up</h2><p class="p2azb0q">This is a non-exhaustive list but you get the idea.</p><p class="p2azb0q">As you can see, there&#x27;s a bit of a trade-off. It&#x27;s not as convenient as installing a package and importing it into our project. We still have to write a bit of code to leverage these browser features but the advantage is that we are now relying on code that has been battle-tested and more importantly, we haven&#x27;t increased the size of our JavaScript bundle.</p><p class="p2azb0q">As always, make sure these features are supported by the browsers you are targeting.</p><p class="p2azb0q"><strong>Stay safe âœŒï¸</strong></p></article></main><footer class="f1wraaq9">Â© <!-- -->2022<!-- --> <!-- -->Etienne Martin</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"path":"let-the-browser-do-it-for-you","readingTime":"9 min read"},"__N_SSG":true},"page":"/posts/[...path]","query":{"path":["let-the-browser-do-it-for-you"]},"buildId":"d_zpUAM6bMdIsyFQj3ifP","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
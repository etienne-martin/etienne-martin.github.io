export const metadata = {
  date: "2019-02-20T19:26:54.937Z",
  title: "The Website Performance Checklist",
  description:
    "A grocery list of performance improvements that will hopefully make your website faster",
  image: require("./browser.png"),
  imageAlt: "A little browser lifting weights",
};

Montrer les différentes architectures pour une application web performante:

- SSG
- SSR + Caching
- Incremental Static Generation
- lambdas

## Perceived performance vs actual performance

- Les metrics: First Meaningful Paint, time to first byte etc.
- late loading
- ghost content

## The quick wins

- css content-visibility
- Limit the amount of DOM elements with virtualization (react-virtualized)
- React re-rendering (React.memo)

## Network

- http2 + self host 3rd party assets
- dns-prefetch, preconnect and preload
- Eliminate render-blocking resources (async, defer)

## Bundling

- minification JS, CSS, HTML
- bundle splitting
- tree shaking
- Remove unused CSS (css-in-js can help with that)
- [Dynamic imports](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#dynamic_imports)
- [Native modules](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules)

## Frontend Performance

- Force GPU
- will-change (do not overuse, add when the element is inView)
- requestAnimationFrame
- requestIdleCallback
- passive listeners
- web workers

## Node.js

- avoid gzipping in the node process (Can make things worse)
- Production flag (NODE_ENV)

## Caching

- Avoid hitting the origin server
  - Browser caching
  - cdn (explain the concept)
- cache-control, explain how it works and how it plays with a cdn
- micro-caching

## Fonts

- use [variable fonts](https://web.dev/variable-fonts/) if possible
- font-display: swap https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display
- self host (http2)
- Google font text parameter: https://fonts.googleapis.com/css2?family=Akaya+Telivigala&display=swap&text=THIS_IS_SOME_TEXT

## Images

- Properly sized images
- Proper image formats (webp)
- `srcSet` and `sizes` attributes
- lazy loading (`loading` attribute)
- Optimize images
- Optimize SVGs

## auto-scaling

- HPA
- CA

## Comment diagnostiquer des problèmes de performance (front vs node)

- 0x
- autocannon
- console.time() and console.timeEnd()
- performance.mark
- chrome devTools slow 3g
- cpu throttling
- analyze bundle size (react-bundle-analyzer)
- moment.js
- react profiler
- lighthouse
